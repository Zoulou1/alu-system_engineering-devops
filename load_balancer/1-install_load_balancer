#!/usr/bin/env bash
# Script to install and configure HAProxy on lb-01 for round-robin load balancing

# Update package list and install HAProxy
sudo apt-get update -y
sudo apt-get install haproxy -y

# Configure HAProxy for round-robin load balancing
sudo tee /etc/haproxy/haproxy.cfg > /dev/null <<EOL
# Global settings
global
    log /dev/log local0
    log /dev/log local1 notice
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin
    stats timeout 30s
    user haproxy
    group haproxy
    daemon

# Default settings
defaults
    log global
   
